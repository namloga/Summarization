# Примеры данных / Датасет

## Поддерживаемый формат CSV

Backend принимает CSV с **как минимум одной колонкой с текстом отзыва**. Название колонки может быть:

- `text`, `content`, `review`, `feedback`, `comment`, **`original_text`**

Пример (как в датасете Sony WH-CH520):

```csv
Product,ID,Original_text
Наушники беспроводные Sony WH-CH520,1,"Текст отзыва..."
Наушники беспроводные Sony WH-CH520,2,"Ещё один отзыв..."
```

- Кодировка: **UTF-8**.
- Пустые строки/пустые ячейки будут пропущены.
- Лимиты (можно увеличить через переменные окружения):
  - **Количество строк:** по умолчанию **2000** на файл, максимум **20 000** — например, `SUMMARIZATION_MAX_FILE_ITEMS=5000`.
  - **Размер файла:** по умолчанию **10 MB**, максимум **100 MB** — например, `SUMMARIZATION_MAX_FILE_MB=50`.
  - При больших объёмах запрос может выполняться долго (много chunk‑сводок); при необходимости увеличьте таймаут на reverse proxy.

## Как обработать датасет (например, `Sony_CH520.csv`)

### Способ 1: Через веб-интерфейс (рекомендуется)

1. Запустите **backend:** в папке `backend` выполните `python -m src.main`.
2. Откройте **frontend:** в папке `frontend` выполните `python serve.py` (или откройте `index.html`).
3. Перейдите во вкладку **Файл** → **Загрузить файл** (или выберите файл) → выберите `Sony_CH520.csv`.
4. Нажмите **Суммаризовать**.
5. Результат появится справа: построчная суммаризация, а также Product/ID, если frontend сохраняет метаданные.

### Способ 2: Вызвать API напрямую

```bash
curl -X POST "http://localhost:8000/summarize-file?combine=true&detail=true" -F "file=@Sony_CH520.csv"
```

- **detail=true** (по умолчанию): **более подробная** сводка (несколько предложений, старается сохранить аспекты: звук, батарея, удобство, негатив…).
- **detail=false**: короткая сводка (дополнительное сжатие).

Или через Python:

```python
import requests
with open("Sony_CH520.csv", "rb") as f:
    r = requests.post("http://localhost:8000/summarize-file", files={"file": ("Sony_CH520.csv", f, "text/csv")})
print(r.json())
```

### Способ 3: Положить файл в эту папку (только для удобства)

Вы можете скопировать `Sony_CH520.csv` в `backend/data/` как пример. API **не** читает файлы отсюда автоматически; загрузка всё равно выполняется через frontend или `curl`/скрипт, как выше.
